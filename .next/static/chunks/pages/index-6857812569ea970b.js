(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(o,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(5561)}])},5561:function(o,e,i){"use strict";i.r(e),i.d(e,{default:function(){return Home}});var n=i(5893),t=i(7294);function RoomTile(o){let{room:e}=o,i={width:46,height:38,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,boxShadow:"0 1px 2px rgba(0,0,0,0.1)",background:e.occupied?"#f87171":"#86efac",color:"#111"};return(0,n.jsx)("div",{title:"".concat(e.id," (").concat(e.floor,"-").concat(e.index,")"),style:i,children:e.id})}function FloorGrid(o){let{rooms:e=[]}=o,i={};e.forEach(o=>{i[o.floor]=i[o.floor]||[],i[o.floor].push(o)});let t=[];for(let o=10;o>=1;o--){let e=(i[o]||[]).sort((o,e)=>o.index-e.index);t.push((0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[(0,n.jsxs)("div",{style:{width:72},children:["Floor ",o]}),(0,n.jsx)("div",{style:{display:"flex",gap:6},children:e.map(o=>(0,n.jsx)(RoomTile,{room:o},o.id))})]},o))}return(0,n.jsx)("div",{children:t})}function Controls(o){let{onChange:e,loading:i}=o,[s,r]=(0,t.useState)(1),[l,d]=(0,t.useState)("");async function book(){d("");try{let o=await fetch("/api/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numRooms:s})}),i=await o.json();o.ok?(d("Booked rooms: ".concat(i.booking.rooms.join(", "))),e&&e()):d(i.error||"Booking failed")}catch(o){d(o.message)}}async function randomize(){d(""),await fetch("/api/randomize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({occupiedRatio:.25})}),e&&e()}async function reset(){d(""),await fetch("/api/reset",{method:"POST"}),e&&e()}return(0,n.jsxs)("div",{style:{marginBottom:12},children:[(0,n.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,n.jsx)("label",{children:"Rooms to book (1-5):"}),(0,n.jsx)("input",{type:"number",min:"1",max:"5",value:s,onChange:o=>r(Number(o.target.value))}),(0,n.jsx)("button",{onClick:book,disabled:i,children:"Book"}),(0,n.jsx)("button",{onClick:randomize,disabled:i,children:"Randomize"}),(0,n.jsx)("button",{onClick:reset,disabled:i,children:"Reset"})]}),(0,n.jsx)("div",{style:{marginTop:8,color:"#333"},children:l})]})}function BookingList(o){let{bookings:e=[],refresh:i}=o;return(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Bookings"}),(0,n.jsx)("div",{style:{maxHeight:500,overflow:"auto"},children:0===e.length?(0,n.jsx)("div",{children:"No bookings"}):e.map(o=>(0,n.jsxs)("div",{style:{padding:8,borderBottom:"1px solid #eee"},children:[(0,n.jsx)("div",{children:(0,n.jsx)("strong",{children:o.id})}),(0,n.jsxs)("div",{children:["Rooms: ",o.rooms.join(", ")]}),(0,n.jsx)("div",{style:{fontSize:12,color:"#666"},children:o.createdAt})]},o.id))})]})}function Home(){let[o,e]=(0,t.useState)([]),[i,s]=(0,t.useState)([]),[r,l]=(0,t.useState)(!1);async function load(){l(!0);let o=await fetch("/api/rooms").then(o=>o.json()),i=await fetch("/api/bookings").then(o=>o.json());e(o.rooms||[]),s(i.bookings||[]),l(!1)}return(0,t.useEffect)(()=>{load()},[]),(0,n.jsxs)("div",{style:{padding:20,fontFamily:"Inter, Arial"},children:[(0,n.jsx)("h1",{children:"Hotel Room Reservation"}),(0,n.jsx)("p",{children:"97 rooms across 10 floors. Travel: horizontal 1 min/room, vertical 2 min/floor."}),(0,n.jsx)(Controls,{onChange:load,loading:r}),(0,n.jsxs)("div",{style:{display:"flex",gap:24,marginTop:16},children:[(0,n.jsx)("div",{style:{flex:1},children:(0,n.jsx)(FloorGrid,{rooms:o})}),(0,n.jsx)("div",{style:{width:320},children:(0,n.jsx)(BookingList,{bookings:i,refresh:load})})]})]})}}},function(o){o.O(0,[774,888,179],function(){return o(o.s=5728)}),_N_E=o.O()}]);